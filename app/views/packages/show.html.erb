<h1> Show page Packages</h1>

<table>
 <tbody>
<tr>
 <th> Package ID2 </th>
 <th> Product ID</th>
 <th> Cost</th>
</tr>

<tr>
	<td><%= @package.package_id %></td>
	<td><%= link_to @package.product_id, product_path( @package.product_id ) %></td>
	<td><%= @package.cost %></td>
</tr>
 </tbody>
</table>

<%= link_to "All packages", packages_path %>
<br><br>
<p>Number of Sales: <%= @package.sales.count %></p>
<% @touse = @package.sales.all %>
<p>List of sales: </p>
<table>
 <tbody>
<tr>
 <th> Transaction ID </th>
 <th> Customer ID </th>
 <th> Package ID</th>
</tr>
<% @touse.each do |customer| %>
<tr>
	<td><%= link_to @package.sales.find(customer).transaction_id, customer %></td>
	<td><%= link_to @package.sales.find(customer).customer.name, customer_path( @package.sales.find(customer).customer_id) %></td>
	<td><%= @package.sales.find(customer).package_id %></td>
</tr>
<% end %>
 </tbody>
</table>
<br>
<p>List of Customers who bought package: </p>
<table>
 <tbody>
<tr>
 <th> Name </th>
 <th> Company Name </th>
 <th> Customer ID</th>
</tr>
<% @touse2 = @package.customers.all.uniq.pluck(:id) %>
<% @touse2.each do |customer| %>
<tr>
	<td><%= link_to @package.customers.find(customer).name, customer_path( @package.customers.find(customer).id ) %></td>
	<td><%= @package.customers.find(customer).company_name %></td>
	<td><%= @package.customers.find(customer).customer_id %></td>
</tr>
<% end %>
 </tbody>
</table>
<br>
<p> More info on prodcut in this package: </p>
<table>
 <tbody>
<tr>
 <th> Name </th>
 <th> Info </th>
 <th> Base Cost</th>
</tr>

<tr>
	<td><%= @package.product.product_name %></td>
	<td><%= @package.product.product_info %></td>
	<td><%= @package.product.product_base_cost %></td>
</tr>

 </tbody>
</table>
<br>